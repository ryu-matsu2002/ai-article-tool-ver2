<!-- templates/post_log.html -->
{% extends 'base.html' %}
{% block title %}æŠ•ç¨¿ãƒ­ã‚°{% endblock %}

{% block content %}
<h2>ğŸ“ æŠ•ç¨¿ãƒ­ã‚°ä¸€è¦§</h2>

<form method="get" class="mb-3">
  <label class="form-label">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§çµã‚Šè¾¼ã¿ï¼š</label>
  <select name="status" class="form-select w-auto d-inline" onchange="this.form.submit()">
    <option value="">ã™ã¹ã¦</option>
    <option value="pending" {% if selected_status == 'pending' %}selected{% endif %}>â³ æœªæŠ•ç¨¿</option>
    <option value="scheduled" {% if selected_status == 'scheduled' %}selected{% endif %}>ğŸ“… æŠ•ç¨¿äºˆå®š</option>
    <option value="posted" {% if selected_status == 'posted' %}selected{% endif %}>âœ… æŠ•ç¨¿æ¸ˆ</option>
    <option value="failed" {% if selected_status == 'failed' %}selected{% endif %}>âŒ å¤±æ•—</option>
  </select>
</form>

<table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>ã‚¿ã‚¤ãƒˆãƒ«</th>
      <th>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</th>
      <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
      <th>æŠ•ç¨¿äºˆå®š</th>
      <th>ä½œæˆæ—¥æ™‚</th>
      <th>æ“ä½œ</th>
    </tr>
  </thead>
  <tbody>
    {% for article in articles %}
    <tr>
      <td>{{ article.id }}</td>
      <td>{{ article.title }}</td>
      <td>{{ article.keyword }}</td>
      <td>{{ article.status }}</td>
      <td>{{ article.scheduled_time or '-' }}</td>
      <td>{{ article.created_at }}</td>
      <td>
        <a class="btn btn-sm btn-outline-primary" href="{{ url_for('main.article_detail', article_id=article.id) }}">ğŸ”</a>
        <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('main.edit_article', article_id=article.id) }}">âœï¸</a>
        {% if article.status == 'failed' %}
        <form method="POST" action="{{ url_for('main.retry_post', article_id=article.id) }}" style="display:inline;">
          {{ csrf_token() }}
          <button class="btn btn-sm btn-outline-danger" type="submit">ğŸ”„</button>
        </form>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
